<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet"> 
	<link href="/stylesheets/restaurants.css" rel="stylesheet"> 
	<script src="https://maps.googleapis.com/maps/api/js"></script>
	<script>
	//decode function
	function decodeHtml(html) {
	    var txt = document.createElement("textarea");
	    txt.innerHTML = html;
	    return txt.value;
	}

	//google map function
	function initialize() {
	  <% for(var i=0; i < allrestaurants.length; i++) { %>
	   var myLatlng = new google.maps.LatLng(<%= allrestaurants[i][8]%>,<%= allrestaurants[i][6]%>);
	  var mapProp = {
	    center:myLatlng,
	    zoom:17,
	    mapTypeId:google.maps.MapTypeId.ROADMAP
	  };
	 var map = new google.maps.Map(document.getElementById("<%= allrestaurants[i][0]%>"),mapProp);
	 var title = decodeHtml('<%= allrestaurants[i][5]%>');
	 var marker = new google.maps.Marker({
	     position: myLatlng,
	     map: map,
	     title:title
	 });
	<% } %>	
	}
	google.maps.event.addDomListener(window, 'load', initialize);
	</script>
</head>
<body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="brand" href="/login"><img src="/images/logo.png"></a>
			</div>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Restaurants Info<span class="sr-only">(current)</span></a></li>
					<li><a href="#">Friends Update</a></li>
					<li><a href="#">Personal Profile</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<form class="navbar-form navbar-left" role="search">
						<div class="form-group">
							<input type="text" class="form-control" placeholder="Search">
						</div>
						<button type="submit" class="btn btn-default">Submit</button>
					</form>
				</ul>
			</div><!-- /.navbar-collapse -->
		</div><!-- /.container-fluid -->
	</nav>	
	<% for(var i=0; i < allrestaurants.length; i++) { %>
		<div class="container">
			<div class="jumbotron">
				<table class="table table-striped table-hover" >
					<h3><%= allrestaurants[i][5]%></h1>
						<tr>
							<th>Name</th>
							<td><%= allrestaurants[i][5]%></td>
						</tr>
						<tr>
							<th>Address</th>
							<td><%= allrestaurants[i][1]%></td>
						</tr>
						<tr>
							<th>Yelp Stars</th>
							<td><%= allrestaurants[i][7]%></td>
						</tr>
					</table>
					<br>
					<a class="btn btn-primary btn-sm" href="#" role="button">Learn more</a>
					<br><br>
					<div id="<%= allrestaurants[i][0]%>" class="google-map"></div>
					
				</div>
			</div>
			<% } %>	

			<!-- Le javascript
				================================================== -->
				<!-- Placed at the end of the document so the pages load faster -->

			    <script src="/javascripts/jquery.js"></script>
			    <script src="/javascripts/bootstrap.js"></script>
					

			</body>
			</html>

